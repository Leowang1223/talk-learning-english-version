# ğŸ“ AI ä¸­æ–‡å­¸ç¿’å¹³å° (Chinese Learning Platform)

ä¸€å€‹åŸºæ–¼ AI çš„äº’å‹•å¼ä¸­æ–‡å­¸ç¿’å¹³å°ï¼ŒçµåˆèªéŸ³è­˜åˆ¥ã€æ™ºèƒ½è©•åˆ†ã€è¦–é »æ•™å­¸å’Œæƒ…å¢ƒå°è©±ï¼Œå…¨æ–¹ä½æå‡ä¸­æ–‡å£èªèƒ½åŠ›ã€‚

<div align="center">

![Node.js](https://img.shields.io/badge/Node.js-18+-green)
![Next.js](https://img.shields.io/badge/Next.js-14-black)
![TypeScript](https://img.shields.io/badge/TypeScript-5+-blue)
![Gemini API](https://img.shields.io/badge/Gemini-2.0--flash-orange)
![License](https://img.shields.io/badge/License-MIT-yellow)

</div>

---

## âœ¨ æ ¸å¿ƒç‰¹è‰²

### ğŸ¯ æ™ºèƒ½è©•åˆ†ç³»çµ±
- **å¤šç¶­åº¦åˆ†æ**: ç™¼éŸ³æº–ç¢ºåº¦ã€è²èª¿ã€æµæš¢åº¦ã€å®Œæ•´æ€§ã€ç†è§£åŠ›äº”å€‹ç¶­åº¦è©•ä¼°
- **å³æ™‚åé¥‹**: ä½¿ç”¨ Google Gemini 2.0 Flash API é€²è¡Œå³æ™‚èªéŸ³è½‰æ–‡å­—å’Œè©•åˆ†
- **æ‹¼éŸ³éŒ¯èª¤æª¢æ¸¬**: åŸºæ–¼æ‹¼éŸ³çš„éŒ¯èª¤è­˜åˆ¥ï¼Œç²¾æº–æŒ‡å‡ºç™¼éŸ³å•é¡Œ
- **å°ç£è…”èª¿æ”¯æŒ**: å°ˆç‚ºå°ç£ä¸­æ–‡å­¸ç¿’è€…å„ªåŒ–

### ğŸ“š çµæ§‹åŒ–èª²ç¨‹ç³»çµ±
- **10 ç« ç¯€æ¼¸é€²å¼èª²ç¨‹**: å¾ A1 åˆ° B1 ç´šåˆ¥ï¼Œæ¶µè“‹æ—¥å¸¸å°è©±åˆ°å°ˆæ¥­è¡¨é”
- **100+ èª²ç¨‹å–®å…ƒ**: æ¯å€‹ç« ç¯€åŒ…å« 10 å€‹ç²¾å¿ƒè¨­è¨ˆçš„èª²ç¨‹
- **å¤šç¨®æ•™å­¸æ–¹å¼**: æ”¯æŒ TTS èªéŸ³åˆæˆå’Œè¦–é »æ•™å­¸
- **è‡ªå‹•å­—å¹•åŒæ­¥**: è¦–é »èª²ç¨‹é…å‚™å¯¦æ™‚å­—å¹•ï¼Œå¹«åŠ©ç†è§£

### ğŸ¬ å¤šåª’é«”æ•™å­¸
- **YouTube è¦–é »æ•´åˆ**: æ”¯æŒæœ¬åœ°è¦–é »å’Œ YouTube è¦–é »
- **è‡ªå‹•æ’­æ”¾æ§åˆ¶**: æ¯é¡Œè‡ªå‹•æ’­æ”¾ä¸€æ¬¡ï¼Œé¿å…é‡è¤‡å¹²æ“¾
- **è¬›å¸«åˆ‡æ›**: æ”¯æŒå¤šä½å°ç£ä¸­æ–‡è¬›å¸«èªéŸ³åˆ‡æ›
- **è¦–é »å­—å¹•åŒæ­¥**: å¯¦æ™‚é¡¯ç¤ºå­—å¹•ï¼Œè¼”åŠ©å­¸ç¿’

### ğŸ’¬ æƒ…å¢ƒå°è©±ç³»çµ±
- **AI å°è©±ç·´ç¿’**: èˆ‡ AI é€²è¡ŒçœŸå¯¦æƒ…å¢ƒå°è©±
- **æ™ºèƒ½æª¢æŸ¥é»**: ç³»çµ±è‡ªå‹•åˆ¤æ–·å°è©±å®Œæ•´åº¦ï¼Œå¼•å°å­¸ç¿’è€…å®Œæˆé—œéµä¿¡æ¯
- **è©å½™æœ¬**: è‡ªå‹•è¨˜éŒ„å°è©±ä¸­çš„æ–°è©å½™ï¼Œæ”¯æŒè¤‡ç¿’
- **ç¦®è²Œç”¨èªæª¢æ¸¬**: è‡ªå‹•è­˜åˆ¥çµæŸä¿¡è™Ÿï¼Œè‡ªç„¶æµæš¢åœ°åˆ‡æ›è©±é¡Œ

### ğŸ“– æ™ºèƒ½å­¸ç¿’å·¥å…·
- **å–®å­—å¡ç³»çµ±**: 
  - è‡ªå‹•æ”¶éŒ„éŒ¯èª¤é¡Œç›®
  - æ”¯æŒåˆ†é¡ç®¡ç†ï¼ˆæŒ‰ç« ç¯€ã€é›£åº¦ï¼‰
  - è¤‡ç¿’æ¨¡å¼ï¼Œéå›ºå­¸ç¿’
- **å­¸ç¿’æ­·å²è¿½è¹¤**:
  - å®Œæ•´è¨˜éŒ„æ¯æ¬¡ç·´ç¿’
  - è©³ç´°çš„è©•åˆ†å ±å‘Š
  - éŒ¯èª¤åˆ†æå’Œæ”¹é€²å»ºè­°
- **ç·´ç¿’å›æ”¾**:
  - é‡æ–°ç·´ç¿’æ­·å²é¡Œç›®
  - å°æ¯”æ­·å²æˆç¸¾
  - è¿½è¹¤é€²æ­¥è»Œè·¡

### ğŸ“Š æ•¸æ“šåˆ†æèˆ‡å ±å‘Š
- **èª²ç¨‹å®Œæˆå ±å‘Š**: æ¯èª²çµæŸå¾Œç”Ÿæˆè©³ç´°å ±å‘Š
- **è©å½™çµ±è¨ˆ**: è¨˜éŒ„æ–°å­¸è©å½™å’ŒæŒæ¡æƒ…æ³
- **éŒ¯èª¤åˆ†æ**: æ‹¼éŸ³ç´šåˆ¥çš„éŒ¯èª¤è¨ºæ–·
- **é€²åº¦è¿½è¹¤**: ç« ç¯€ã€èª²ç¨‹å®Œæˆåº¦å¯è¦–åŒ–

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒè¦æ±‚

- **Node.js**: 18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: 8.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Google Gemini API Key**: [ç²å– API Key](https://makersuite.google.com/app/apikey)

### å®‰è£æ­¥é©Ÿ

#### 1. å…‹éš†å°ˆæ¡ˆ
```bash
git clone <repository-url>
cd chiness-interview-main
```

#### 2. å®‰è£ä¾è³´
```bash
npm install
```

#### 3. é…ç½®ç’°å¢ƒè®Šæ•¸

å‰µå»º `apps/backend/.env` æ–‡ä»¶ï¼š
```env
# Gemini API Key (å¿…å¡«)
GEMINI_API_KEY=your_gemini_api_key_here

# æœå‹™å™¨ç«¯å£ (å¯é¸ï¼Œé»˜èª 8082)
PORT=8082

# Node ç’°å¢ƒ (å¯é¸ï¼Œé»˜èª development)
NODE_ENV=development
```

#### 4. å•Ÿå‹•æœå‹™

**æ–¹å¼ä¸€ï¼šåŒæ™‚å•Ÿå‹•å‰å¾Œç«¯ï¼ˆæ¨è–¦ï¼‰**
```bash
npm run dev
```

**æ–¹å¼äºŒï¼šåˆ†åˆ¥å•Ÿå‹•**
```bash
# çµ‚ç«¯ 1 - å¾Œç«¯ (Port 8082)
cd apps/backend
npm run dev

# çµ‚ç«¯ 2 - å‰ç«¯ (Port 3000)
cd apps/web
npm run dev
```

#### 5. è¨ªå•æ‡‰ç”¨
```
å‰ç«¯æ‡‰ç”¨: http://localhost:3000
å¾Œç«¯ API: http://localhost:8082
å¥åº·æª¢æŸ¥: http://localhost:8082/health
```

---

## ğŸ“ å°ˆæ¡ˆæ¶æ§‹

```
chiness-interview-main/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ backend/                          # Express + TypeScript å¾Œç«¯
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/                   # API è·¯ç”±
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ analyze.ts            # æ–‡æœ¬åˆ†æ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ conversation.ts       # æƒ…å¢ƒå°è©± API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lessons.ts            # èª²ç¨‹åˆ—è¡¨å’Œå…§å®¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ scenarios.ts          # å ´æ™¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ score.ts              # èªéŸ³è©•åˆ†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sessions.ts           # å­¸ç¿’è¨˜éŒ„
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ qa.ts                 # å•ç­”ç³»çµ±
â”‚   â”‚   â”‚   â”œâ”€â”€ plugins/                  # èª²ç¨‹å…§å®¹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chinese-lessons/      # ä¸­æ–‡èª²ç¨‹
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chapter-01/       # ç¬¬ 1 ç«  (A1)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chapter-02/       # ç¬¬ 2 ç«  (A1)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chapter-03/       # ç¬¬ 3 ç«  (A2)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ...               # ç« ç¯€ 4-10
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TEMPLATE.json     # èª²ç¨‹æ¨¡æ¿
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ scenarios/            # å°è©±å ´æ™¯
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ conversationStore.ts  # å°è©±ç‹€æ…‹ç®¡ç†
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ fileStore.ts          # æ–‡ä»¶å­˜å„²
â”‚   â”‚   â”‚   â”œâ”€â”€ analysis-core/            # åˆ†æå¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ geminiService.ts          # Gemini API æœå‹™
â”‚   â”‚   â”‚   â””â”€â”€ server.ts                 # æœå‹™å™¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ .env                          # ç’°å¢ƒè®Šæ•¸
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â””â”€â”€ web/                              # Next.js 14 å‰ç«¯
â”‚       â”œâ”€â”€ app/
â”‚       â”‚   â”œâ”€â”€ (protected)/              # å—ä¿è­·è·¯ç”±ï¼ˆéœ€ç™»å…¥ï¼‰
â”‚       â”‚   â”‚   â”œâ”€â”€ lesson/[id]/          # ğŸ“š èª²ç¨‹å­¸ç¿’é é¢
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ page.tsx          # ä¸»è¦å­¸ç¿’ç•Œé¢ (2900+ è¡Œ)
â”‚       â”‚   â”‚   â”œâ”€â”€ dashboard/            # ğŸ“Š å„€è¡¨æ¿
â”‚       â”‚   â”‚   â”œâ”€â”€ prepare/              # ğŸ¥ è¨­å‚™æº–å‚™é é¢
â”‚       â”‚   â”‚   â”œâ”€â”€ conversation/         # ğŸ’¬ æƒ…å¢ƒå°è©±
â”‚       â”‚   â”‚   â”œâ”€â”€ history/              # ğŸ“ˆ å­¸ç¿’æ­·å²
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx          # æ­·å²åˆ—è¡¨
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ playback/         # å›æ”¾ç·´ç¿’
â”‚       â”‚   â”‚   â”œâ”€â”€ flashcards/           # ğŸ“– å–®å­—å¡ç³»çµ±
â”‚       â”‚   â”‚   â”œâ”€â”€ report/               # ğŸ“„ èª²ç¨‹å ±å‘Š
â”‚       â”‚   â”‚   â””â”€â”€ analysis/             # ğŸ“Š æ•¸æ“šåˆ†æ
â”‚       â”‚   â”œâ”€â”€ (public)/                 # å…¬é–‹è·¯ç”±
â”‚       â”‚   â”œâ”€â”€ api/                      # API ä»£ç†è·¯ç”±
â”‚       â”‚   â”œâ”€â”€ globals.css               # å…¨å±€æ¨£å¼
â”‚       â”‚   â”œâ”€â”€ layout.tsx                # æ ¹å¸ƒå±€
â”‚       â”‚   â””â”€â”€ providers.tsx             # ç‹€æ…‹æä¾›è€…
â”‚       â”œâ”€â”€ components/                   # React çµ„ä»¶
â”‚       â”œâ”€â”€ public/
â”‚       â”‚   â””â”€â”€ videos/
â”‚       â”‚       â””â”€â”€ lessons/              # æœ¬åœ°èª²ç¨‹è¦–é »
â”‚       â”‚           â””â”€â”€ L1/               # èª²ç¨‹ 1 è¦–é »
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ next.config.js
â”‚
â”œâ”€â”€ docker-compose.yml                    # Docker éƒ¨ç½²é…ç½®
â”œâ”€â”€ package.json                          # Monorepo æ ¹é…ç½®
â””â”€â”€ README.md                            # æœ¬æ–‡ä»¶
```

---

## ğŸ¯ ä¸»è¦åŠŸèƒ½æ¨¡å¡Š

### 1. èª²ç¨‹å­¸ç¿’ç³»çµ± (`/lesson/[id]`)

#### åŠŸèƒ½ç‰¹é»
- âœ… è‡ªå‹•æ’­æ”¾é¡Œç›®ï¼ˆè¦–é »æˆ– TTSï¼‰
- âœ… èªéŸ³éŒ„è£½èˆ‡è©•åˆ†
- âœ… å¯¦æ™‚å­—å¹•é¡¯ç¤º
- âœ… è¬›å¸«åˆ‡æ›ï¼ˆå¤šä½å°ç£è¬›å¸«ï¼‰
- âœ… è‡ªå‹•é€²å…¥ä¸‹ä¸€é¡Œ
- âœ… éŒ¯èª¤é¡Œç›®è‡ªå‹•åŠ å…¥å–®å­—å¡
- âœ… èª²ç¨‹å®Œæˆå ±å‘Šç”Ÿæˆ

#### ä½¿ç”¨æµç¨‹
1. é¸æ“‡èª²ç¨‹ â†’ 2. è½é¡Œç›®/çœ‹è¦–é » â†’ 3. éŒ„éŸ³å›ç­” â†’ 4. å³æ™‚è©•åˆ† â†’ 5. è‡ªå‹•ä¸‹ä¸€é¡Œ â†’ 6. å®Œæˆå ±å‘Š

### 2. æƒ…å¢ƒå°è©±ç³»çµ± (`/conversation`)

#### åŠŸèƒ½ç‰¹é»
- âœ… å¤šå ´æ™¯å°è©±ç·´ç¿’ï¼ˆé¤å»³ã€é…’åº—ã€è³¼ç‰©ç­‰ï¼‰
- âœ… AI æ™ºèƒ½å›æ‡‰
- âœ… æª¢æŸ¥é»ç³»çµ±ï¼ˆç¢ºä¿å®Œæˆé—œéµä¿¡æ¯ï¼‰
- âœ… è©å½™æœ¬è‡ªå‹•è¨˜éŒ„
- âœ… ç¦®è²Œç”¨èªæª¢æ¸¬ï¼ˆè‡ªå‹•åˆ‡æ›è©±é¡Œï¼‰

#### å°è©±æµç¨‹
1. é¸æ“‡å ´æ™¯ â†’ 2. AI æå• â†’ 3. èªéŸ³å›ç­” â†’ 4. AI å›æ‡‰ â†’ 5. æª¢æŸ¥å®Œæˆåº¦ â†’ 6. ä¸‹ä¸€è©±é¡Œ

### 3. å–®å­—å¡ç³»çµ± (`/flashcards`)

#### åŠŸèƒ½ç‰¹é»
- âœ… è‡ªå‹•æ”¶éŒ„éŒ¯èª¤é¡Œç›®
- âœ… æŒ‰ç« ç¯€ã€é›£åº¦åˆ†é¡
- âœ… æ”¯æŒæ¨™è¨˜"å·²æŒæ¡"
- âœ… è¤‡ç¿’æ¨¡å¼
- âœ… çµ±è¨ˆå­¸ç¿’é€²åº¦

### 4. å­¸ç¿’æ­·å² (`/history`)

#### åŠŸèƒ½ç‰¹é»
- âœ… å®Œæ•´è¨˜éŒ„æ‰€æœ‰ç·´ç¿’
- âœ… è©³ç´°è©•åˆ†å ±å‘Š
- âœ… éŒ¯èª¤åˆ†æ
- âœ… æ”¯æŒå›æ”¾ç·´ç¿’
- âœ… é€²åº¦å¯è¦–åŒ–

### 5. æ•¸æ“šåˆ†æ (`/analysis`)

#### åŠŸèƒ½ç‰¹é»
- âœ… ç« ç¯€å®Œæˆåº¦çµ±è¨ˆ
- âœ… å¹³å‡åˆ†æ•¸è¶¨å‹¢
- âœ… è©å½™æŒæ¡æƒ…æ³
- âœ… å¼±é»åˆ†æ
- âœ… å­¸ç¿’å»ºè­°

---

## ğŸ”Œ API æ¥å£èªªæ˜

### å¾Œç«¯ API (Port 8082)

| ç«¯é» | æ–¹æ³• | èªªæ˜ |
|------|------|------|
| `/health` | GET | å¥åº·æª¢æŸ¥ |
| `/api/lessons` | GET | ç²å–èª²ç¨‹åˆ—è¡¨ |
| `/api/lessons/:id` | GET | ç²å–èª²ç¨‹è©³æƒ… |
| `/api/score` | POST | èªéŸ³è©•åˆ† |
| `/api/sessions` | GET | ç²å–å­¸ç¿’è¨˜éŒ„ |
| `/api/sessions/:sessionId` | GET | ç²å–å–®æ¬¡è¨˜éŒ„è©³æƒ… |
| `/api/scenarios` | GET | ç²å–å°è©±å ´æ™¯åˆ—è¡¨ |
| `/api/scenarios/:id` | GET | ç²å–å ´æ™¯è©³æƒ… |
| `/api/conversation/*` | POST | å°è©±ç›¸é—œæ¥å£ |
| `/api/analyze` | POST | æ–‡æœ¬åˆ†æ |
| `/api/qa` | POST | å•ç­”ç³»çµ± |

### è©•åˆ† API è©³ç´°èªªæ˜

**è«‹æ±‚æ ¼å¼** (`POST /api/score`)
```typescript
Content-Type: multipart/form-data

{
  audio: File,              // éŸ³é »æ–‡ä»¶ (webm/mp4)
  expectedAnswer: string[], // æœŸæœ›ç­”æ¡ˆï¼ˆJSON å­—ç¬¦ä¸²ï¼‰
  questionId: string,       // é¡Œç›® ID
  lessonId: string         // èª²ç¨‹ ID
}
```

**éŸ¿æ‡‰æ ¼å¼**
```typescript
{
  transcript: string,       // è­˜åˆ¥æ–‡æœ¬
  overall_score: number,    // ç¸½åˆ† (0-100)
  scores: {
    pronunciation: number,  // ç™¼éŸ³æº–ç¢ºåº¦
    fluency: number,        // æµæš¢åº¦
    accuracy: number,       // æº–ç¢ºåº¦
    comprehension: number,  // ç†è§£åŠ›
    confidence: number      // ä¿¡å¿ƒåº¦
  },
  feedback: string,         // è©³ç´°åé¥‹
  pinyin_errors?: Array<{   // æ‹¼éŸ³éŒ¯èª¤ï¼ˆå¯é¸ï¼‰
    character: string,
    correct_pinyin: string,
    user_pinyin: string,
    error_type: string
  }>
}
```

---

## ğŸ¨ æŠ€è¡“æ£§

### å‰ç«¯
- **æ¡†æ¶**: Next.js 14 (App Router)
- **èªè¨€**: TypeScript 5+
- **æ¨£å¼**: Tailwind CSS
- **ç‹€æ…‹ç®¡ç†**: React Hooks + Context
- **èªéŸ³**: Web Speech API
- **è¦–é »**: HTML5 Video API

### å¾Œç«¯
- **æ¡†æ¶**: Express.js
- **èªè¨€**: TypeScript
- **AI**: Google Gemini 2.0 Flash
- **æ–‡ä»¶è™•ç†**: Multer
- **æ•¸æ“šå­˜å„²**: JSON File System

### é–‹ç™¼å·¥å…·
- **åŒ…ç®¡ç†**: npm workspaces (Monorepo)
- **ä¸¦ç™¼é‹è¡Œ**: concurrently
- **éƒ¨ç½²**: Docker + Docker Compose

---

## ğŸ“¦ èª²ç¨‹å…§å®¹çµæ§‹

### èª²ç¨‹ JSON æ ¼å¼
```json
{
  "lesson_id": "C1-L01",
  "chapter_id": "C1",
  "lesson_number": 1,
  "title": "Greetings",
  "description": "Learn the most basic daily greetings.",
  "steps": [
    {
      "id": 1,
      "teacher": "ä½ å¥½",
      "expected_answer": ["ä½ å¥½"],
      "pinyin": "nÇ hÇo",
      "english_hint": "hello",
      "encouragement": "Great job!",
      "tts_text": "ä½ å¥½",
      "tts_voice": "zh-TW-HsiaoChenNeural",
      "video_url": "/videos/lessons/L1/step1.mp4",
      "captions": [
        {
          "text": "ä½ å¥½",
          "start": 0.0,
          "end": 1.5
        }
      ]
    }
  ],
  "review": {
    "summary": "You learned basic greetings.",
    "mission": "Next lesson: Introductions."
  }
}
```

### ç« ç¯€è¦åŠƒ

| ç« ç¯€ | ç´šåˆ¥ | ä¸»é¡Œ | èª²ç¨‹æ•¸ |
|------|------|------|--------|
| Chapter 1 | A1 | åŸºæœ¬å•å€™èˆ‡è‡ªæˆ‘ä»‹ç´¹ | 10 |
| Chapter 2 | A1 | æ—¥å¸¸ç”¨èªèˆ‡æ•¸å­— | 10 |
| Chapter 3 | A2 | æ™‚é–“èˆ‡æ—¥æœŸ | 10 |
| Chapter 4 | A2 | è³¼ç‰©èˆ‡äº¤é€š | 10 |
| Chapter 5 | A2 | é£²é£Ÿèˆ‡å¥åº· | 10 |
| Chapter 6 | B1 | æ—…éŠèˆ‡ä½å®¿ | 10 |
| Chapter 7 | B1 | å·¥ä½œèˆ‡å­¸ç¿’ | 10 |
| Chapter 8 | B1 | ç¤¾äº¤èˆ‡å¨›æ¨‚ | 10 |
| Chapter 9 | B1 | æƒ…æ„Ÿèˆ‡æ„è¦‹ | 10 |
| Chapter 10 | B1 | è«–è¿°èˆ‡æ¨ç† | 10 |

---

## ğŸ³ Docker éƒ¨ç½²

### ä½¿ç”¨ Docker Compose

```bash
# æ§‹å»ºä¸¦å•Ÿå‹•
docker-compose up -d

# æŸ¥çœ‹æ—¥èªŒ
docker-compose logs -f

# åœæ­¢æœå‹™
docker-compose down
```

### è¨ªå•æœå‹™
```
å‰ç«¯: http://localhost:3000
å¾Œç«¯: http://localhost:8081
```

### ç’°å¢ƒè®Šæ•¸é…ç½®
åœ¨ `docker-compose.yml` ä¸­é…ç½®ï¼š
```yaml
environment:
  - GEMINI_API_KEY=${GEMINI_API_KEY}
```

---

## ğŸ§ª é–‹ç™¼æŒ‡å—

### æ·»åŠ æ–°èª²ç¨‹

1. åœ¨ `apps/backend/src/plugins/chinese-lessons/chapter-XX/` å‰µå»º `lesson-XX.json`
2. æŒ‰ç…§ `TEMPLATE.json` æ ¼å¼å¡«å¯«èª²ç¨‹å…§å®¹
3. é‡å•Ÿå¾Œç«¯æœå‹™ï¼Œèª²ç¨‹è‡ªå‹•è¼‰å…¥

### æ·»åŠ è¦–é »èª²ç¨‹

1. å°‡è¦–é »æ”¾ç½®åœ¨ `apps/web/public/videos/lessons/LX/`
2. åœ¨èª²ç¨‹ JSON ä¸­æ·»åŠ  `video_url` å­—æ®µ
3. å¯é¸ï¼šæ·»åŠ  `captions` å­—æ®µå¯¦ç¾å­—å¹•åŒæ­¥

### æ·»åŠ å°è©±å ´æ™¯

1. åœ¨ `apps/backend/src/plugins/scenarios/` å‰µå»ºå ´æ™¯ JSON
2. å®šç¾©å ´æ™¯ä¿¡æ¯ã€æª¢æŸ¥é»å’Œè©å½™
3. é‡å•Ÿå¾Œç«¯æœå‹™

### è‡ªå®šç¾©è¬›å¸«èªéŸ³

åœ¨ `apps/web/app/(protected)/lesson/[id]/page.tsx` ä¸­ä¿®æ”¹ï¼š
```typescript
const VOICE_MAP: Record<string, string> = {
  'female1': 'Microsoft HsiaoChen - Chinese (Taiwan)',
  'female2': 'Microsoft Yating - Chinese (Taiwan)',
  // æ·»åŠ æ–°çš„èªéŸ³
}
```

---

## ğŸ“Š æ€§èƒ½å„ªåŒ–

### å‰ç«¯å„ªåŒ–
- âœ… åœ–ç‰‡æ‡¶åŠ è¼‰
- âœ… çµ„ä»¶æŒ‰éœ€åŠ è¼‰
- âœ… API è«‹æ±‚å»æŠ–å‹•
- âœ… éŸ³é »é è¼‰å…¥

### å¾Œç«¯å„ªåŒ–
- âœ… API éŸ¿æ‡‰ç·©å­˜
- âœ… æ–‡ä»¶æµå¼å‚³è¼¸
- âœ… éŒ¯èª¤é‡è©¦æ©Ÿåˆ¶
- âœ… è«‹æ±‚é™æµ

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. è‡ªå‹•æ’­æ”¾è¢«ç€è¦½å™¨é˜»æ­¢
**è§£æ±ºæ–¹æ¡ˆ**: é»æ“Š"æ‰‹å‹•æ’­æ”¾"æŒ‰éˆ•ï¼Œæˆ–å…è¨±ç¶²ç«™è‡ªå‹•æ’­æ”¾æ¬Šé™

#### 2. èªéŸ³è­˜åˆ¥ä¸æº–ç¢º
**è§£æ±ºæ–¹æ¡ˆ**: 
- ç¢ºä¿éº¥å…‹é¢¨æ¬Šé™å·²é–‹å•Ÿ
- åœ¨å®‰éœç’°å¢ƒä¸­éŒ„éŸ³
- èªªè©±æ¸…æ™°ï¼Œé¿å…éå¿«æˆ–éæ…¢

#### 3. Gemini API è©•åˆ†å¤±æ•—
**è§£æ±ºæ–¹æ¡ˆ**:
- æª¢æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ API Key æ˜¯å¦æ­£ç¢º
- ç¢ºèª API Key é¡åº¦æœªç”¨ç›¡
- æŸ¥çœ‹å¾Œç«¯æ—¥èªŒäº†è§£è©³ç´°éŒ¯èª¤

#### 4. è¦–é »ç„¡æ³•æ’­æ”¾
**è§£æ±ºæ–¹æ¡ˆ**:
- ç¢ºèªè¦–é »æ–‡ä»¶å­˜åœ¨æ–¼ `public/videos/` ç›®éŒ„
- æª¢æŸ¥è¦–é »æ ¼å¼ï¼ˆæ¨è–¦ mp4ï¼‰
- æŸ¥çœ‹ç€è¦½å™¨æ§åˆ¶å°éŒ¯èª¤ä¿¡æ¯

---

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿è²¢ç»ï¼è«‹éµå¾ªä»¥ä¸‹æ­¥é©Ÿï¼š

1. Fork æœ¬å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•Ÿ Pull Request

---

## ğŸ“„ æˆæ¬Šå”è­°

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šå”è­° - è©³è¦‹ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ“ è¯ç¹«æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œæ­¡è¿è¯ç¹«ï¼š

- **Email**: your-email@example.com
- **GitHub Issues**: [æäº¤å•é¡Œ](https://github.com/your-repo/issues)

---

## ğŸ™ è‡´è¬

- Google Gemini API æä¾›å¼·å¤§çš„ AI èƒ½åŠ›
- Next.js å’Œ React åœ˜éšŠ
- å°ç£ä¸­æ–‡æ•™å­¸ç¤¾ç¾¤
- æ‰€æœ‰è²¢ç»è€…

---

<div align="center">

**â­ å¦‚æœé€™å€‹å°ˆæ¡ˆå°ä½ æœ‰å¹«åŠ©ï¼Œè«‹çµ¦å€‹æ˜Ÿæ˜Ÿï¼â­**

Made with â¤ï¸ by Chinese Learning Team

</div>

## ğŸ® ä¸»è¦åŠŸèƒ½

### 1. èª²ç¨‹å­¸ç¿’ (`/lesson/[id]`)

**æ ¸å¿ƒæµç¨‹ï¼š**
- é¸æ“‡èª²ç¨‹ç« ç¯€
- è½å–é¡Œç›®éŸ³é »æˆ–è§€çœ‹è¦–é »
- éŒ„è£½ç­”æ¡ˆ
- **å³æ™‚è‡ªå‹•è©•åˆ†** - ç„¡å»¶é²ç›´æ¥é€²å…¥ä¸‹ä¸€é¡Œ
- å®Œæˆå¾ŒæŸ¥çœ‹è©³ç´°å ±è¡¨

**è©•åˆ†ç³»çµ±ï¼š**
- æ–‡å­—ç›¸ä¼¼åº¦åˆ†æ
- æ‹¼éŸ³åŒ¹é…æª¢æ¸¬
- è²èª¿æº–ç¢ºåº¦è©•ä¼°
- æ§½ä½æª¢æŸ¥ï¼ˆé—œéµå­—é©—è­‰ï¼‰
- ç¶œåˆå¾—åˆ†è¨ˆç®—

**è‡ªå‹•å‰é€²æ©Ÿåˆ¶ï¼š**
- è©•åˆ†å®Œæˆå¾Œç«‹å³åˆ‡æ›åˆ°ä¸‹ä¸€é¡Œ
- ä¸é¡¯ç¤ºå–®é¡Œåé¥‹é é¢
- å¤±æ•—é¡Œç›®è‡ªå‹•åŠ å…¥å–®å­—å¡
- æ‰€æœ‰é¡Œç›®å®Œæˆå¾Œé¡¯ç¤ºç¸½å ±è¡¨

### 2. å­¸ç¿’å„€è¡¨æ¿ (`/dashboard`)

- æŸ¥çœ‹å¯ç”¨èª²ç¨‹åˆ—è¡¨
- è¿½è¹¤å­¸ç¿’é€²åº¦
- å¿«é€Ÿè¨ªå•æœ€è¿‘èª²ç¨‹

### 3. å­¸ç¿’æ­·å² (`/history`)

- æŸ¥çœ‹æ‰€æœ‰å­¸ç¿’è¨˜éŒ„
- è©³ç´°çš„è©•åˆ†å ±å‘Š
- äº”ç¶­é›·é”åœ–åˆ†æ
- é€é¡Œè¡¨ç¾å›é¡§
- éŒ¯èª¤åˆ†æå’Œæ”¹é€²å»ºè­°

### 4. æ™ºèƒ½å–®å­—å¡ (`/flashcards`)

- è‡ªå‹•æ”¶éŒ„éŒ¯èª¤é¡Œç›®
- åˆ†é¡ç®¡ç†ï¼ˆå¯å‰µå»ºä¸åŒç‰Œçµ„ï¼‰
- è¤‡ç¿’æ¨¡å¼
- åŒ¯å‡º/åŒ¯å…¥åŠŸèƒ½

## ğŸ”§ æŠ€è¡“æ£§

### å‰ç«¯
- **æ¡†æ¶**: Next.js 14 (App Router)
- **èªè¨€**: TypeScript
- **æ¨£å¼**: Tailwind CSS
- **UI çµ„ä»¶**: Lucide React Icons
- **åœ–è¡¨**: Chart.js + react-chartjs-2
- **PDF ç”Ÿæˆ**: jsPDF + html2canvas
- **ä¸­æ–‡è™•ç†**: pinyin-pro

### å¾Œç«¯
- **æ¡†æ¶**: Express.js
- **èªè¨€**: TypeScript
- **AI æœå‹™**: Google Generative AI (Gemini 2.0 Flash)
- **èªéŸ³è™•ç†**: Web Audio API
- **CORS**: cors middleware

### é–‹ç™¼å·¥å…·
- **åŒ…ç®¡ç†**: npm workspaces
- **ä¸¦ç™¼åŸ·è¡Œ**: concurrently
- **TypeScript**: ts-node

## ğŸ“Š è©•åˆ†ç®—æ³•

### ä¸‰ç¶­è©•åˆ†ç³»çµ±

1. **æ–‡å­—ç›¸ä¼¼åº¦ (Text Similarity)**
   - Levenshtein Distance ç®—æ³•
   - æ¨™æº–åŒ–è™•ç†ï¼ˆç§»é™¤æ¨™é»ã€ç©ºæ ¼ï¼‰
   - æ¬Šé‡: 40%

2. **æ‹¼éŸ³ç›¸ä¼¼åº¦ (Phoneme Similarity)**
   - ä¸­æ–‡å­—è½‰æ‹¼éŸ³æ¯”å°
   - æ”¯æ´åŒéŸ³å­—è­˜åˆ¥
   - æ¬Šé‡: 35%

3. **è²èª¿æº–ç¢ºåº¦ (Tone Accuracy)**
   - å››è²åŒ¹é…åº¦åˆ†æ
   - æ‹¼éŸ³è²èª¿è™Ÿé©—è­‰
   - æ¬Šé‡: 25%

### æ§½ä½æª¢æŸ¥ (Slot Check)

- é©—è­‰é—œéµå­—æ˜¯å¦å­˜åœ¨
- æª¢æŸ¥èªç¾©çµæ§‹å®Œæ•´æ€§
- è­˜åˆ¥éºæ¼çš„é‡è¦æˆåˆ†

### æœ€çµ‚åˆ¤å®š

```typescript
ç¶œåˆå¾—åˆ† = (æ–‡å­—ç›¸ä¼¼åº¦ Ã— 0.4) + (æ‹¼éŸ³ç›¸ä¼¼åº¦ Ã— 0.35) + (è²èª¿æº–ç¢ºåº¦ Ã— 0.25)

é€šéæ¢ä»¶:
- ç¶œåˆå¾—åˆ† â‰¥ 70 åˆ†
- æ§½ä½æª¢æŸ¥é€šé
- å¾Œç«¯ AI è©•åˆ† â‰¥ 60 åˆ†
```

## ğŸ¨ èª²ç¨‹å…§å®¹æ ¼å¼

### èª²ç¨‹å®šç¾© (JSON)

```json
{
  "lesson_id": "C1-L01",
  "chapterId": "C1",
  "lessonNumber": 1,
  "title": "Greetings",
  "description": "Learn basic greetings",
  "steps": [
    {
      "id": 1,
      "teacher": "ä½ å¥½",
      "pinyin": ["nÇ hÇo"],
      "expected_answer": ["ä½ å¥½"],
      "video_url": "https://youtube.com/watch?v=...",
      "captions": [
        {
          "start": 0,
          "end": 2,
          "text": "Hello in Chinese"
        }
      ]
    }
  ]
}
```

### æ”¯æ´çš„åŠŸèƒ½

- âœ… å¤šå€‹é æœŸç­”æ¡ˆï¼ˆalternative answersï¼‰
- âœ… æ‹¼éŸ³æ¨™è¨»
- âœ… YouTube è¦–é »æ•´åˆ
- âœ… æ™‚é–“è»¸å­—å¹•
- âœ… TTS èªéŸ³åˆæˆ
- âœ… è¦–é »æ’­æ”¾æ§åˆ¶

## ğŸ” API ç«¯é»

### èª²ç¨‹ç›¸é—œ

```
GET  /api/lessons           # ç²å–æ‰€æœ‰èª²ç¨‹åˆ—è¡¨
GET  /api/lessons/:id       # ç²å–ç‰¹å®šèª²ç¨‹è©³æƒ…
```

### è©•åˆ†ç›¸é—œ

```
POST /api/score             # æäº¤éŒ„éŸ³é€²è¡Œè©•åˆ†
```

**è«‹æ±‚æ ¼å¼ (multipart/form-data):**
- `audio`: éŸ³é »æ–‡ä»¶ (webm/wav)
- `expectedAnswer`: JSON å­—ç¬¦ä¸²æ•¸çµ„
- `questionId`: é¡Œç›® ID
- `lessonId`: èª²ç¨‹ ID

**éŸ¿æ‡‰æ ¼å¼:**
```json
{
  "overall_score": 85,
  "transcript": "ä½ å¥½",
  "feedback": "Great pronunciation!",
  "suggestions": ["Practice tone 3 more", "..."],
  "mispronounced": [
    {
      "text": "å¥½",
      "pinyin": "hao3",
      "issue": "Tone too flat",
      "tip": "Dip down for tone 3"
    }
  ],
  "method": "gemini"
}
```

## ğŸ§ª æ¸¬è©¦

### å¾Œç«¯æ¸¬è©¦
```bash
cd apps/backend
npm test
```

### å‰ç«¯æ¸¬è©¦
```bash
cd apps/web
npm test
```

### Gemini API æ¸¬è©¦
```bash
node test-gemini-scoring.js
```

## ğŸ› å¸¸è¦‹å•é¡Œ

### 1. Port å·²è¢«ä½”ç”¨

**æ¸…é™¤ Port 8082:**
```powershell
Get-NetTCPConnection -LocalPort 8082 | Select-Object -ExpandProperty OwningProcess | ForEach-Object { Stop-Process -Id $_ -Force }
```

**æ¸…é™¤ Port 3000:**
```powershell
Get-NetTCPConnection -LocalPort 3000 | Select-Object -ExpandProperty OwningProcess | ForEach-Object { Stop-Process -Id $_ -Force }
```

### 2. Gemini API éŒ¯èª¤

- ç¢ºèª `.env` æ–‡ä»¶ä¸­çš„ `GEMINI_API_KEY` æ­£ç¢º
- æª¢æŸ¥ API é…é¡æ˜¯å¦è¶³å¤ 
- é©—è­‰ç¶²çµ¡é€£æ¥

### 3. å‰ç«¯ç·¨è­¯éŒ¯èª¤

```bash
cd apps/web
rm -rf .next
npm install
npm run build
```

### 4. éŸ³é »éŒ„è£½å¤±æ•—

- ç¢ºèªç€è¦½å™¨éº¥å…‹é¢¨æ¬Šé™
- ä½¿ç”¨ HTTPS æˆ– localhost
- æª¢æŸ¥éº¥å…‹é¢¨è¨­å‚™ç‹€æ…‹

## ğŸ“ é–‹ç™¼æŒ‡å—

### æ·»åŠ æ–°èª²ç¨‹

1. åœ¨ `apps/backend/src/plugins/chinese-lessons/` å‰µå»ºæ–°ç« ç¯€æ–‡ä»¶å¤¾
2. æ·»åŠ  `lesson-X.json` æ–‡ä»¶
3. æŒ‰ç…§èª²ç¨‹æ ¼å¼å®šç¾©å…§å®¹
4. é‡å•Ÿå¾Œç«¯æœå‹™

### ä¿®æ”¹è©•åˆ†é‚è¼¯

ç·¨è¼¯ `apps/web/app/(protected)/lesson/[id]/page.tsx`:
- `calculateThreeDimensionalScore()` - ä¸‰ç¶­è©•åˆ†
- `checkKeySlots()` - æ§½ä½æª¢æŸ¥
- `judgeScore()` - æœ€çµ‚åˆ¤å®š

### è‡ªå®šç¾© UI ä¸»é¡Œ

ç·¨è¼¯ `apps/web/app/globals.css` å’Œ Tailwind é…ç½®

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ æˆæ¬Š

MIT License

## ğŸ‘¥ ä½œè€…

Taiwan Chinese Learning Platform Team

---

**æœ€å¾Œæ›´æ–°**: 2025-11-15
